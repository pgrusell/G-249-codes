# G-249-codes

Here we present a set of codes to analyze and simulate the G-249 setup and results. First, the code generates the geometry of the setup (vacuum chamber, LH2 target, FOOTs, and the different detectors). Then, it simulates the experiment beamtime by generating 25-F ions and letting them interact with the LH2 target, producing the particles of interest. These particles' positions will be measured by a set of FOOT detectors, with the main goal of using this data to reconstruct the reaction vertex within the LH2 target.

To achieve this, different algorithms will be tested. For instance, by finding the closest point to the lines that join the first two points with the final points or by training a Neural Network (NN) with simulated data.

## Code structure

1. **geo:** Macros for building the vacuum chamber, LH2 target, and FOOTs geometry.
2. **sim:** Macros for simulating the incoming beam and its interaction with the setup.
3. **ana:** Macros for analyzing the results of the simulation, particularly extracting the important data (FOOT info and real interaction vertex) from `.root` files generated by the simulation macros, reconstructing the vertex from that data, and analyzing the reconstruction error.
4. **exec:** Scripts for executing the entire process of creating the geometry, simulating, extracting the data from the simulation output file, reconstructing the vertex, and studying the error.
5. **vis:** Event display of the simulation.
6. **setup:** File with the positions of the FOOTs, which will be read by the geometry macro.
7. **dependencies:** File for the installation of Python dependencies such as TensorFlow.

## Dependencies

To run these codes, the R3BRoot framework ([R3BRoot GitHub](https://github.com/R3BRootGroup/R3BRoot)) is needed. For the vertex reconstruction using NN, TensorFlow is also required. These packages, as well as other Python modules used, can be installed from the conda environment (`dependencies/python_dependencies.yml`) by running:

```bash
conda env create -f dependencies/python_dependencies.yml
```
